---
layout:     post
title:   左值，右值，左值引用，右值引用
subtitle:   :   左值，右值，左值引用，右值引用
date:       2021-09-20
author:     LXR
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - 左值和右值
    - 左值引用和右值引用
---

# 参考文章
[]()

# 表达式
表达式是由运算符(operator)和运算对象(operand)构成的计算式。字面值和变量是最简单的表达式，函数的返回值也被认为是表达式。

表达式是可求值的，对表达式求值将得到一个结果，这个结果有两个属性：类型和值类别，而表达式的值类别必属于左值、将亡值或纯右值三者之一。

“左值”和“右值”是表达式结果的一种属性。通常用“左值”来指代左值表达式，用“右值”指代右值表达式。

# 左值和右值

## 左值
左值：能对表达式取地址、或具名对象/变量。一般指表达式结束后依然存在的持久对象。
例子：
>* 函数名和变量名（实际上是函数指针③和具名变量，具名变量如std::cin、std::endl等）、返回左值引用的函数调用、前置自增/自减运算符连接的表达式++i/--i、由赋值运算符或复合赋值运算符连接的表达式(a=b、a+=b、a%=b）、解引用表达式*p、字符串字面值"abc"（关于这一点，后面会详细说明）等。

## 右值
右值：不能对表达式取地址，或匿名对象。一般指表达式结束就不再存在的临时对象。

### 将亡值
将亡值（xvalue，eXpiring value）：指生命期即将结束的值，一般是跟右值引用相关的表达式，这样表达式通常是将要被移动的对象。
例子：
>* 返回类型为T&&的函数返回值（如std::move）、经类型转换为右值引用的对象（如static_cast<T&&>(obj)）、xvalue类对象的成员访问表达式也是一个xvalue（如Test().memberdata，注意Test()是个临时对象）

### 纯右值
纯右值：满足下列条件之一：
     1）本身就是赤裸裸的、纯粹的字面值，如3、false；
     2）求值结果相当于字面值或是一个不具名的临时对象。
例子：
>* 除字符串字面值以外的字面值、返回非引用类型的函数调用、后置自增/自减运算符连接的表达式i++/i--、算术表达式（a+b、a&b、a<<b）、逻辑表达式（a&&b、a||b、~a）、比较表达式（a==b、a>=b、a<b）、取地址表达式（&a）等。

## 左值引用和右值引用
左值引用是具名变量/对象的别名，右值引用是匿名变量/对象的别名。

右值引用和左值引用都是属于引用类型。无论是声明一个左值引用还是右值引用，都必须立即进行初始化。

## 关系
左值和右值是独立于它的类型的，即左右值与类型没有直接关系，它们是表达式的属性。

具名的右值引用是左值，匿名的右值引用是右值。如Type&& t中t是个具名变量（最简单的表达式），t的类型是右值引用类型，但具有左值属性。而Type&& func()中的返回值（是个表达式）是右值引用类型，但具有右值属性（因为是个匿名对象）。

![ralationship](/img/lvalue_and_rvalue_1.jpg)






